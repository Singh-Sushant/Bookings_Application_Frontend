<div class="container mx-auto mt-10 max-w-md">
  <h2 class="text-2xl font-bold mb-6">Change Password</h2>
  <form (ngSubmit)="onSubmit()" #passwordForm="ngForm">
    <div class="mb-4">
      <label for="currentPassword" class="block text-sm font-medium text-gray-700">Current Password</label>
      <input
        type="password"
        id="currentPassword"
        name="currentPassword"
        [(ngModel)]="currentPassword"
        required
        minlength="6"
        #currentPass="ngModel"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
      <div *ngIf="currentPass.invalid && (currentPass.dirty || currentPass.touched)" class="mt-2 text-sm text-red-600">
        <div *ngIf="currentPass.errors?.['required']">Current password is required.</div>
        <div *ngIf="currentPass.errors?.['minlength']">Password must be at least 6 characters long.</div>
      </div>
    </div>

    <div class="mb-4">
      <label for="newPassword" class="block text-sm font-medium text-gray-700">New Password</label>
      <input
        type="password"
        id="newPassword"
        name="newPassword"
        [(ngModel)]="newPassword"
        required
        minlength="6"
        #newPass="ngModel"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
      <div *ngIf="newPass.invalid && (newPass.dirty || newPass.touched)" class="mt-2 text-sm text-red-600">
        <div *ngIf="newPass.errors?.['required']">New password is required.</div>
        <div *ngIf="newPass.errors?.['minlength']">Password must be at least 6 characters long.</div>
        <div *ngIf="newPass.errors?.['pattern']">Password must contain an uppercase letter, a lowercase letter, a digit, and a special character.</div>
      </div>
    </div>

    <div class="mb-4">
      <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Confirm Password</label>
      <input
        type="password"
        id="confirmPassword"
        name="confirmPassword"
        [(ngModel)]="confirmPassword"
        required
        #confirmPass="ngModel"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
      <div *ngIf="confirmPass.invalid && (confirmPass.dirty || confirmPass.touched)" class="mt-2 text-sm text-red-600">
        <div *ngIf="confirmPass.errors?.['required']">Confirm password is required.</div>
        <div *ngIf="confirmPassword !== newPassword && confirmPass.dirty">Passwords do not match.</div>
      </div>
    </div>

    <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" [disabled]="!passwordForm.form.valid">Update Password</button>
  </form>

  <div *ngIf="alertMessage" class="mt-4" [ngClass]="alertType === 'success' ? 'bg-green-100 border-green-400 text-green-700' : 'bg-red-100 border-red-400 text-red-700'" class="border px-4 py-3 rounded relative" role="alert">
    {{ alertMessage }}
  </div>
</div>